/*! cornerstone-wado-image-loader - 2.0.0 - 2018-04-06 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstoneWADOImageLoader */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("dicom-parser")):"function"==typeof define&&define.amd?define("cornerstoneWADOImageLoader",["dicom-parser"],t):"object"==typeof exports?exports.cornerstoneWADOImageLoader=t(require("dicom-parser")):e.cornerstoneWADOImageLoader=t(e.dicomParser)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=45)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.external=t.dicomParser=void 0;var a=r(52),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),o=r(53),i=function(e){return e&&e.__esModule?e:{default:e}}(o),l=void 0,u={set cornerstone(e){l=e,(0,i.default)(l)},get cornerstone(){return l}};t.dicomParser=n,t.external=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.internal=t.xhrRequest=t.getOptions=t.setOptions=void 0;var a=r(56),n=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r(4),i={xhrRequest:n.default,setOptions:o.setOptions,getOptions:o.getOptions};t.setOptions=o.setOptions,t.getOptions=o.getOptions,t.xhrRequest=n.default,t.internal=i},function(e,t,r){"use strict";function a(e){for(var t=e[0],r=e[0],a=void 0,n=e.length,o=1;o<n;o++)a=e[o],t=Math.min(t,a),r=Math.max(r,a);return{min:t,max:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e,t,r){return t=t||0,e&&e.Value?e.Value.length<=t?r:e.Value[t]:r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e){Object.keys(e).forEach(function(t){o[t]=e[t]})}function n(){return o}Object.defineProperty(t,"__esModule",{value:!0}),t.setOptions=a,t.getOptions=n;var o={beforeSend:function(){},imageCreated:function(){},strict:!1,decodeConfig:{}}},function(e,t,r){"use strict";function a(e,t){var r=i._malloc(e.length);i.writeArrayToMemory(e,r);var a=i._malloc(4),n=i._malloc(4),o=i._malloc(4),l=i._malloc(4),u=i._malloc(4),f=i._malloc(4),d=i._malloc(4),s=i._malloc(4),c=i._malloc(4),p=i.ccall("jpegls_decode","number",["number","number","number","number","number","number","number","number","number","number","number"],[r,e.length,a,n,o,l,u,f,s,d,c]),m={result:p,width:i.getValue(o,"i32"),height:i.getValue(l,"i32"),bitsPerSample:i.getValue(u,"i32"),stride:i.getValue(f,"i32"),components:i.getValue(s,"i32"),allowedLossyError:i.getValue(d,"i32"),interleaveMode:i.getValue(c,"i32"),pixelData:void 0},g=i.getValue(a,"*");return m.bitsPerSample<=8?(m.pixelData=new Uint8Array(m.width*m.height*m.components),m.pixelData.set(new Uint8Array(i.HEAP8.buffer,g,m.pixelData.length))):t?(m.pixelData=new Int16Array(m.width*m.height*m.components),m.pixelData.set(new Int16Array(i.HEAP16.buffer,g,m.pixelData.length))):(m.pixelData=new Uint16Array(m.width*m.height*m.components),m.pixelData.set(new Uint16Array(i.HEAP16.buffer,g,m.pixelData.length))),i._free(r),i._free(g),i._free(a),i._free(n),i._free(o),i._free(l),i._free(u),i._free(f),i._free(s),i._free(c),m}function n(){if("undefined"==typeof CharLS)throw new Error("No JPEG-LS decoder loaded");if(!(i||(i=CharLS())&&i._jpegls_decode))throw new Error("JPEG-LS failed to initialize")}function o(e,t){n();var r=a(t,1===e.pixelRepresentation);if(0!==r.result&&6!==r.result)throw new Error("JPEG-LS decoder failed to decode frame (error code "+r.result+")");return e.columns=r.width,e.rows=r.height,e.pixelData=r.pixelData,e}Object.defineProperty(t,"__esModule",{value:!0});var i=void 0;t.default=o,t.initializeJPEGLS=n},function(e,t,r){"use strict";function a(e,t){var r=new JpxImage;r.parse(t);var a=r.tiles.length;if(1!==a)throw new Error("JPEG2000 decoder returned a tileCount of "+a+", when 1 is expected");return e.columns=r.width,e.rows=r.height,e.pixelData=r.tiles[0].items,e}function n(e,t,r){var a=u._malloc(e.length);u.writeArrayToMemory(e,a);var n=u._malloc(4),o=u._malloc(4),i=u._malloc(4),l=u._malloc(4),f=u._malloc(4),d=(new Date).getTime();if(0!==u.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[a,e.length,n,o,i,l,f]))return console.log("[opj_decode] decoding failed!"),u._free(a),u._free(u.getValue(n,"*")),u._free(i),u._free(l),u._free(o),void u._free(f);var s=u.getValue(n,"*"),c={length:u.getValue(o,"i32"),sx:u.getValue(i,"i32"),sy:u.getValue(l,"i32"),nbChannels:u.getValue(f,"i32"),perf_timetodecode:void 0,pixelData:void 0},p=c.sx*c.sy*c.nbChannels,m=new Int32Array(u.HEAP32.buffer,s,p);if(1===t)if(Uint8Array.from)c.pixelData=Uint8Array.from(m);else{c.pixelData=new Uint8Array(p);for(var g=0;g<p;g++)c.pixelData[g]=m[g]}else if(r)if(Int16Array.from)c.pixelData=Int16Array.from(m);else{c.pixelData=new Int16Array(p);for(var v=0;v<p;v++)c.pixelData[v]=m[v]}else if(Uint16Array.from)c.pixelData=Uint16Array.from(m);else{c.pixelData=new Uint16Array(p);for(var b=0;b<p;b++)c.pixelData[b]=m[b]}var x=(new Date).getTime();return c.perf_timetodecode=x-d,u._free(a),u._free(n),u._free(s),u._free(o),u._free(i),u._free(l),u._free(f),c}function o(e,t){var r=e.bitsAllocated<=8?1:2,a=1===e.pixelRepresentation,o=n(t,r,a);return e.columns=o.sx,e.rows=o.sy,e.pixelData=o.pixelData,o.nbChannels>1&&(e.photometricInterpretation="RGB"),e}function i(e){if(!e.usePDFJS&&"undefined"==typeof OpenJPEG)throw new Error("OpenJPEG decoder not loaded");if(!(u||(u=OpenJPEG())&&u._jp2_decode))throw new Error("OpenJPEG failed to initialize")}function l(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i(r),n.usePDFJS||r.usePDFJS?a(e,t):o(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var u=void 0;t.default=l,t.initializeJPEG2000=i},function(e,t,r){"use strict";function a(e){var t=e.indexOf(":"),r=e.substring(t+1),a=r.indexOf("frame="),n=void 0;if(-1!==a){var o=r.substr(a+6);n=parseInt(o,10),r=r.substr(0,a-1)}return{scheme:e.substr(0,t),url:r,frame:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e,t){l[e]=t}function n(e){return l[e]}function o(e){l[e]=void 0}function i(){l=[]}Object.defineProperty(t,"__esModule",{value:!0});var l=[];t.default={add:a,get:n,remove:o,purge:i}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){return"1.2.840.10008.5.1.4.1.1.12.1"!==e&&"1.2.840.10008.5.1.4.1.1.12.2.1"!==e}function o(e){for(var t=(0,x.default)(e),r=Math.abs(t.max-t.min),a=r/65535,n=t.min,o=e.length,i=new Uint16Array(o),l=65535,u=0,f=0;f<o;f++){var d=Math.floor((e[f]-n)/a);i[f]=d,l=Math.min(l,d),u=Math.max(u,d)}return{min:l,max:u,intPixelData:i,slope:a,intercept:n}}function i(e){32===e.bitsAllocated?e.pixelData=new Float32Array(e.pixelData):16===e.bitsAllocated?0===e.pixelRepresentation?e.pixelData=new Uint16Array(e.pixelData):e.pixelData=new Int16Array(e.pixelData):e.pixelData=new Uint8Array(e.pixelData)}function l(e,t,r,a){var l=u.external.cornerstone,f=document.createElement("canvas"),s=(0,d.default)(e),p=(0,c.default)(s,r,t,f,a);return new Promise(function(t,a){p.then(function(a){var u=l.metaData.get("imagePlaneModule",e)||{},d=l.metaData.get("voiLutModule",e)||{},s=l.metaData.get("modalityLutModule",e)||{},c=l.metaData.get("sopCommonModule",e)||{},p=(0,m.default)(a.photometricInterpretation);if(!(0,y.default)(a,r)&&(i(a),p)){f.height=a.rows,f.width=a.columns;var g=f.getContext("2d"),b=g.createImageData(a.columns,a.rows);(0,v.default)(a,b),a.imageData=b,a.pixelData=b.data;var P=(0,x.default)(a.pixelData);a.smallestPixelValue=P.min,a.largestPixelValue=P.max}var w={imageId:e,color:p,columnPixelSpacing:u.pixelSpacing?u.pixelSpacing[1]:void 0,columns:a.columns,height:a.rows,intercept:s.rescaleIntercept?s.rescaleIntercept:0,invert:"MONOCHROME1"===a.photometricInterpretation,minPixelValue:a.smallestPixelValue,maxPixelValue:a.largestPixelValue,render:void 0,rowPixelSpacing:u.pixelSpacing?u.pixelSpacing[0]:void 0,rows:a.rows,sizeInBytes:a.pixelData.length,slope:s.rescaleSlope?s.rescaleSlope:1,width:a.columns,windowCenter:d.windowCenter?d.windowCenter[0]:void 0,windowWidth:d.windowWidth?d.windowWidth[0]:void 0,decodeTimeInMS:a.decodeTimeInMS,floatPixelData:void 0};if(a.pixelData instanceof Float32Array){var _=a.pixelData,D=o(_);w.minPixelValue=D.min,w.maxPixelValue=D.max,w.slope=D.slope,w.intercept=D.intercept,w.floatPixelData=_,w.getPixelData=function(){return D.intPixelData}}else w.getPixelData=function(){return a.pixelData};if(w.color?(w.render=l.renderColorImage,w.getCanvas=function(){return h===e?f:(f.height=w.rows,f.width=w.columns,f.getContext("2d").putImageData(a.imageData,0,0),h=e,f)}):w.render=l.renderGrayscaleImage,s.modalityLUTSequence&&s.modalityLUTSequence.length>0&&n(c.sopClassUID)&&(w.modalityLUT=s.modalityLUTSequence[0]),d.voiLUTSequence&&d.voiLUTSequence.length>0&&(w.voiLUT=d.voiLUTSequence[0]),w.color&&(w.windowWidth=255,w.windowCenter=127),void 0===w.windowCenter||void 0===w.windowWidth){var O=w.maxPixelValue*w.slope+w.intercept,M=w.minPixelValue*w.slope+w.intercept;w.windowWidth=O-M,w.windowCenter=(O+M)/2}t(w)},a)})}Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),f=r(32),d=a(f),s=r(33),c=a(s),p=r(36),m=a(p),g=r(37),v=a(g),b=r(2),x=a(b),P=r(38),y=a(P),h="";t.default=l},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a,n){var o=(new Date).getTime();if("1.2.840.10008.1.2"===t)e=(0,i.default)(e,r);else if("1.2.840.10008.1.2.1"===t)e=(0,i.default)(e,r);else if("1.2.840.10008.1.2.2"===t)e=(0,u.default)(e,r);else if("1.2.840.10008.1.2.1.99"===t)e=(0,i.default)(e,r);else if("1.2.840.10008.1.2.5"===t)e=(0,d.default)(e,r);else if("1.2.840.10008.1.2.4.50"===t)e=(0,c.default)(e,r);else if("1.2.840.10008.1.2.4.51"===t)e=(0,c.default)(e,r);else if("1.2.840.10008.1.2.4.57"===t)e=(0,m.default)(e,r);else if("1.2.840.10008.1.2.4.70"===t)e=(0,m.default)(e,r);else if("1.2.840.10008.1.2.4.80"===t)e=(0,v.default)(e,r);else if("1.2.840.10008.1.2.4.81"===t)e=(0,v.default)(e,r);else if("1.2.840.10008.1.2.4.90"===t)e=(0,x.default)(e,r,a,n);else{if("1.2.840.10008.1.2.4.91"!==t)throw new Error("no decoder for transfer syntax "+t);e=(0,x.default)(e,r,a,n)}var l=(new Date).getTime();return e.decodeTimeInMS=l-o,e}Object.defineProperty(t,"__esModule",{value:!0});var o=r(11),i=a(o),l=r(12),u=a(l),f=r(13),d=a(f),s=r(14),c=a(s),p=r(15),m=a(p),g=r(5),v=a(g),b=r(6),x=a(b);t.default=n},function(e,t,r){"use strict";function a(e,t){var r=t.buffer,a=t.byteOffset,n=t.length;return 16===e.bitsAllocated?(a%2&&(r=r.slice(a),a=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(r,a,n/2):e.pixelData=new Int16Array(r,a,n/2)):8===e.bitsAllocated||1===e.bitsAllocated?e.pixelData=t:32===e.bitsAllocated&&(a%2&&(r=r.slice(a),a=0),e.pixelData=new Float32Array(r,a,n/4)),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e){return(255&e)<<8|e>>8&255}function n(e,t){if(16===e.bitsAllocated){var r=t.buffer,n=t.byteOffset,o=t.length;n%2&&(r=r.slice(n),n=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(r,n,o/2):e.pixelData=new Int16Array(r,n,o/2);for(var i=0;i<e.pixelData.length;i++)e.pixelData[i]=a(e.pixelData[i])}else 8===e.bitsAllocated&&(e.pixelData=t);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function a(e,t){if(8===e.bitsAllocated)return e.planarConfiguration?o(e,t):n(e,t);if(16===e.bitsAllocated)return i(e,t);throw new Error("unsupported pixel format for RLE")}function n(e,t){for(var r=t,a=e.rows*e.columns,n=new ArrayBuffer(a*e.samplesPerPixel),o=new DataView(r.buffer,r.byteOffset),i=new Int8Array(r.buffer,r.byteOffset),l=new Int8Array(n),u=0,f=o.getInt32(0,!0),d=0;d<f;++d){u=d;var s=o.getInt32(4*(d+1),!0),c=o.getInt32(4*(d+2),!0);0===c&&(c=r.length);for(var p=a*f;s<c;){var m=i[s++];if(m>=0&&m<=127)for(var g=0;g<m+1&&u<p;++g)l[u]=i[s++],u+=e.samplesPerPixel;else if(m<=-1&&m>=-127)for(var v=i[s++],b=0;b<1-m&&u<p;++b)l[u]=v,u+=e.samplesPerPixel}}return e.pixelData=new Uint8Array(n),e}function o(e,t){for(var r=t,a=e.rows*e.columns,n=new ArrayBuffer(a*e.samplesPerPixel),o=new DataView(r.buffer,r.byteOffset),i=new Int8Array(r.buffer,r.byteOffset),l=new Int8Array(n),u=0,f=o.getInt32(0,!0),d=0;d<f;++d){u=d*a;var s=o.getInt32(4*(d+1),!0),c=o.getInt32(4*(d+2),!0);0===c&&(c=r.length);for(var p=a*f;s<c;){var m=i[s++];if(m>=0&&m<=127)for(var g=0;g<m+1&&u<p;++g)l[u]=i[s++],u++;else if(m<=-1&&m>=-127)for(var v=i[s++],b=0;b<1-m&&u<p;++b)l[u]=v,u++}}return e.pixelData=new Uint8Array(n),e}function i(e,t){for(var r=t,a=e.rows*e.columns,n=new ArrayBuffer(a*e.samplesPerPixel*2),o=new DataView(r.buffer,r.byteOffset),i=new Int8Array(r.buffer,r.byteOffset),l=new Int8Array(n),u=o.getInt32(0,!0),f=0;f<u;++f){var d=0,s=0===f?1:0,c=o.getInt32(4*(f+1),!0),p=o.getInt32(4*(f+2),!0);for(0===p&&(p=r.length);c<p;){var m=i[c++];if(m>=0&&m<=127)for(var g=0;g<m+1&&d<a;++g)l[2*d+s]=i[c++],d++;else if(m<=-1&&m>=-127)for(var v=i[c++],b=0;b<1-m&&d<a;++b)l[2*d+s]=v,d++}}return 0===e.pixelRepresentation?e.pixelData=new Uint16Array(n):e.pixelData=new Int16Array(n),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e,t){if("undefined"==typeof JpegImage)throw new Error("No JPEG Baseline decoder loaded");var r=new JpegImage;return r.parse(t),r.colorTransform=!1,8===e.bitsAllocated?(e.pixelData=r.getData(e.columns,e.rows),e):16===e.bitsAllocated?(e.pixelData=r.getData16(e.columns,e.rows),e):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e,t){if("undefined"==typeof jpeg||void 0===jpeg.lossless||void 0===jpeg.lossless.Decoder)throw new Error("No JPEG Lossless decoder loaded");var r=e.bitsAllocated<=8?1:2,a=t.buffer,n=new jpeg.lossless.Decoder,o=n.decode(a,t.byteOffset,t.length,r);return 0===e.pixelRepresentation?16===e.bitsAllocated?(e.pixelData=new Uint16Array(o.buffer),e):(e.pixelData=new Uint8Array(o.buffer),e):(e.pixelData=new Int16Array(o.buffer),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e){return void 0!==d[e]}function n(e){if(d[e])return d[e].dataSet}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.xhrRequest,r=arguments[2];if(d[e])return new Promise(function(t){d[e].cacheCount++,t(d[e].dataSet)});if(s[e])return s[e];var a=t(e,r),n=new Promise(function(t,r){a.then(function(a){var n=new Uint8Array(a),o=void 0;try{o=u.dicomParser.parseDicom(n)}catch(e){return r(e)}d[e]={dataSet:o,cacheCount:1},t(o)},r).then(function(){delete s[e]})});return s[e]=n,n}function i(e){d[e]&&0===--d[e].cacheCount&&delete d[e]}function l(){d={},s={}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),f=r(1),d={},s={};t.default={isLoaded:a,load:o,unload:i,purge:l,get:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="2.0.0"},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(46);Object.defineProperty(t,"convertRGBColorByPixel",{enumerable:!0,get:function(){return a(n).default}});var o=r(47);Object.defineProperty(t,"convertRGBColorByPlane",{enumerable:!0,get:function(){return a(o).default}});var i=r(48);Object.defineProperty(t,"convertYBRFullByPixel",{enumerable:!0,get:function(){return a(i).default}});var l=r(49);Object.defineProperty(t,"convertYBRFullByPlane",{enumerable:!0,get:function(){return a(l).default}});var u=r(50);Object.defineProperty(t,"convertPALETTECOLOR",{enumerable:!0,get:function(){return a(u).default}})},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),o=r(16),i=a(o),l=r(39),u=a(l),f=r(40),d=a(f),s=r(41),c=a(s),p=r(43),m=a(p),g=r(44),v=r(7),b=a(v),x=r(42),P=a(x),y=r(59),h=a(y),w={getImagePixelModule:n.getImagePixelModule,getLUTs:n.getLUTs,getModalityLUTOutputPixelRepresentation:n.getModalityLUTOutputPixelRepresentation,getNumberValues:n.getNumberValues,metaDataProvider:n.metaDataProvider};t.default={metaData:w,dataSetCacheManager:i.default,fileManager:u.default,getEncapsulatedImageFrame:d.default,getUncompressedImageFrame:c.default,loadFileRequest:m.default,loadImageFromPromise:g.loadImageFromPromise,getLoaderForScheme:g.getLoaderForScheme,loadImage:g.loadImage,parseImageId:b.default,unpackBinaryFrame:P.default,register:h.default}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(21);Object.defineProperty(t,"getImagePixelModule",{enumerable:!0,get:function(){return a(n).default}});var o=r(22);Object.defineProperty(t,"getLUTs",{enumerable:!0,get:function(){return a(o).default}});var i=r(23);Object.defineProperty(t,"getModalityLUTOutputPixelRepresentation",{enumerable:!0,get:function(){return a(i).default}});var l=r(24);Object.defineProperty(t,"getNumberValues",{enumerable:!0,get:function(){return a(l).default}});var u=r(51);Object.defineProperty(t,"metaDataProvider",{enumerable:!0,get:function(){return a(u).default}})},function(e,t,r){"use strict";function a(e,t){if(e.elements[t]&&6===e.elements[t].length)return[e.uint16(t,0),e.uint16(t,1),e.uint16(t,2)]}function n(e,t,r){for(var a=[],n=e.elements[t],o=0;o<r[0];o++)16===r[2]?a[o]=e.uint16(t,o):a[o]=e.byteArray[o+n.dataOffset];return a}function o(e,t){t.redPaletteColorLookupTableDescriptor=a(e,"x00281101"),t.greenPaletteColorLookupTableDescriptor=a(e,"x00281102"),t.bluePaletteColorLookupTableDescriptor=a(e,"x00281103"),0===t.redPaletteColorLookupTableDescriptor[0]&&(t.redPaletteColorLookupTableDescriptor[0]=65536,t.greenPaletteColorLookupTableDescriptor[0]=65536,t.bluePaletteColorLookupTableDescriptor[0]=65536);var r=t.redPaletteColorLookupTableDescriptor[0],o=e.elements.x00281201,i=o.length===r?8:16;t.redPaletteColorLookupTableDescriptor[2]!==i&&(t.redPaletteColorLookupTableDescriptor[2]=i,t.greenPaletteColorLookupTableDescriptor[2]=i,t.bluePaletteColorLookupTableDescriptor[2]=i),t.redPaletteColorLookupTableData=n(e,"x00281201",t.redPaletteColorLookupTableDescriptor),t.greenPaletteColorLookupTableData=n(e,"x00281202",t.greenPaletteColorLookupTableDescriptor),t.bluePaletteColorLookupTableData=n(e,"x00281203",t.bluePaletteColorLookupTableDescriptor)}function i(e,t){0===e.uint16("x00280103")?(t.smallestPixelValue=e.uint16("x00280106"),t.largestPixelValue=e.uint16("x00280107")):(t.smallestPixelValue=e.int16("x00280106"),t.largestPixelValue=e.int16("x00280107"))}function l(e){var t={samplesPerPixel:e.uint16("x00280002"),photometricInterpretation:e.string("x00280004"),rows:e.uint16("x00280010"),columns:e.uint16("x00280011"),bitsAllocated:e.uint16("x00280100"),bitsStored:e.uint16("x00280101"),highBit:e.uint16("x00280102"),pixelRepresentation:e.uint16("x00280103"),planarConfiguration:e.uint16("x00280006"),pixelAspectRatio:e.string("x00280034")};return i(e,t),"PALETTE COLOR"===t.photometricInterpretation&&e.elements.x00281101&&o(e,t),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},function(e,t,r){"use strict";function a(e,t){var r=t.uint16("x00283002",0);0===r&&(r=65535);var a=0;a=0===e?t.uint16("x00283002",1):t.int16("x00283002",1);for(var n=t.uint16("x00283002",2),o={id:"1",firstValueMapped:a,numBitsPerEntry:n,lut:[]},i=0;i<r;i++)o.lut[i]=0===e?t.uint16("x00283006",i):t.int16("x00283006",i);return o}function n(e,t){if(t&&t.items.length){for(var r=[],n=0;n<t.items.length;n++){var o=t.items[n].dataSet,i=a(e,o);i&&r.push(i)}return r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function a(e){var t=e.uint16("x00280103"),r=e.uint16("x00280101");return 0===t?0:-1<<r-1}function n(e){var t=e.string("x00080016");if("1.2.840.10008.5.1.4.1.1.2"===t||"1.2.840.10008.5.1.4.1.1.2.1"===t)return 1;var r=e.floatString("x00281052"),n=e.floatString("x00281053");if(void 0!==r&&void 0!==n){return a(e)*n+r<0?1:0}return e.elements.x00283000&&e.elements.x00283000.length>0?0:e.uint16("x00280103")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function a(e,t,r){var a=[],n=e.string(t);if(n){var o=n.split("\\");if(!(r&&o.length<r)){for(var i=0;i<o.length;i++)a.push(parseFloat(o[i]));return a}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(26),o=r(29),i=a(o),l=r(30),u=a(l),f=r(8),d=a(f),s=r(31),c=a(s),p=r(57),m=a(p),g={getNumberString:n.getNumberString,getNumberValue:n.getNumberValue,getNumberValues:n.getNumberValues,getValue:n.getValue,metaDataProvider:n.metaDataProvider};t.default={metaData:g,findIndexOfString:i.default,getPixelData:u.default,loadImage:c.default,metaDataManager:d.default,register:m.default}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(54);Object.defineProperty(t,"getNumberString",{enumerable:!0,get:function(){return a(n).default}});var o=r(27);Object.defineProperty(t,"getNumberValue",{enumerable:!0,get:function(){return a(o).default}});var i=r(28);Object.defineProperty(t,"getNumberValues",{enumerable:!0,get:function(){return a(i).default}});var l=r(3);Object.defineProperty(t,"getValue",{enumerable:!0,get:function(){return a(l).default}});var u=r(55);Object.defineProperty(t,"metaDataProvider",{enumerable:!0,get:function(){return a(u).default}})},function(e,t,r){"use strict";function a(e,t){var r=(0,o.default)(e,t);if(void 0!==r)return parseFloat(r)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=a},function(e,t,r){"use strict";function a(e,t){if(e&&e.Value&&!(t&&e.Value.length<t)){for(var r=[],a=0;a<e.Value.length;a++)r.push(parseFloat(e.Value[a]));return r}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e,t,r){if(r+e.length>t.length)return!1;for(var a=r,n=0;n<e.length;n++)if(e[n]!==t[a++])return!1;return!0}function n(e){for(var t=new Uint8Array(e.length),r=0,a=e.length;r<a;r++)t[r]=e.charCodeAt(r);return t}function o(e,t,r){r=r||0;for(var o=n(t),i=r;i<e.length;i++)if(o[0]===e[i]&&a(o,e,i))return i;return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,r){"use strict";function a(e){for(var t=0;t<e.length;t++)if("--"===e[t].substr(0,2))return e[t]}function n(e){for(var t=0;t<e.length;t++)if("Content-Type:"===e[t].substr(0,13))return e[t].substr(13).trim()}function o(e,t,r){t=t||0,r=r||e.length-t;for(var a="",n=t;n<t+r;n++)a+=String.fromCharCode(e[n]);return a}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream",i={accept:r};return new Promise(function(r,u){(0,l.xhrRequest)(e,t,i).then(function(e){var t=new Uint8Array(e),i=(0,f.default)(t,"\r\n\r\n");-1===i&&u(new Error("invalid response - no multipart mime header"));var l=o(t,0,i),d=l.split("\r\n"),s=a(d);s||u(new Error("invalid response - no boundary marker"));var c=i+4,p=(0,f.default)(t,s,c);-1===p&&u(new Error("invalid response - terminating boundary not found"));var m=p-c-2;r({contentType:n(d),imageFrame:{pixelData:new Uint8Array(e,c,m)}})})})}Object.defineProperty(t,"__esModule",{value:!0});var l=r(1),u=r(29),f=function(e){return e&&e.__esModule?e:{default:e}}(u);t.default=i},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(){return"1.2.840.10008.1.2"}function o(e,t){var r=(new Date).getTime(),a=e.substring(7);return{promise:new Promise(function(o,i){if(void 0===l.default.get(e)){var u=new Error("no metadata for imageId "+e);return i(u)}(0,f.default)(a,e,'multipart/related; type="application/octet-stream"').then(function(a){var l=n(a.contentType),u=a.imageFrame.pixelData;(0,s.default)(e,u,l,t).then(function(e){var t=(new Date).getTime();e.loadTimeInMS=t-r,o(e)},i)},i)}),cancelFn:void 0}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(8),l=a(i),u=r(30),f=a(u),d=r(9),s=a(d);t.default=o},function(e,t,r){"use strict";function a(e){var t=n.external.cornerstone.metaData.get("imagePixelModule",e);return{samplesPerPixel:t.samplesPerPixel,photometricInterpretation:t.photometricInterpretation,planarConfiguration:t.planarConfiguration,rows:t.rows,columns:t.columns,bitsAllocated:t.bitsAllocated,pixelRepresentation:t.pixelRepresentation,smallestPixelValue:t.smallestPixelValue,largestPixelValue:t.largestPixelValue,redPaletteColorLookupTableDescriptor:t.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:t.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:t.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:t.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:t.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:t.bluePaletteColorLookupTableData,pixelData:void 0}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.default=a},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,r,a){var n=a.priority||void 0,o=a.transferPixelData?[r.buffer]:void 0,l=(0,i.getOptions)(),f=l.decodeConfig;return!1===f.useWebWorkers?new Promise(function(n,o){try{var i=[e,t,r,f,a];n(c.default.apply(void 0,i))}catch(e){o(e)}}):u.default.addTask("decodeTask",{imageFrame:e,transferSyntax:t,pixelData:r,options:a},n,o).promise}function o(e,t,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if("1.2.840.10008.1.2"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.1"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.2"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.1.99"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.5"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.4.50"===t)return 8!==e.bitsAllocated||3!==e.samplesPerPixel&&4!==e.samplesPerPixel?n(e,t,r,o):(0,d.default)(e,r,a);if("1.2.840.10008.1.2.4.51"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.4.57"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.4.70"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.4.80"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.4.81"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.4.90"===t)return n(e,t,r,o);if("1.2.840.10008.1.2.4.91"===t)return n(e,t,r,o);throw new Error("No decoder for transfer syntax "+t)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),l=r(34),u=a(l),f=r(35),d=a(f),s=r(10),c=a(s);t.default=o},function(e,t,r){"use strict";function a(){if(m.length){for(var e=0;e<g.length;e++)if("ready"===g[e].status){g[e].status="busy";var t=m.shift();t.start=(new Date).getTime();var r=(new Date).getTime();return P.totalTimeDelayedInMS+=r-t.added,g[e].task=t,g[e].worker.postMessage({taskType:t.taskType,workerIndex:e,data:t.data},t.transferList),void P.numTasksExecuting++}g.length<x.maxWebWorkers&&o()}}function n(e){if("initialize"===e.data.taskType)g[e.data.workerIndex].status="ready",a();else{var t=g[e.data.workerIndex].task.start;g[e.data.workerIndex].task.deferred.resolve(e.data.result),g[e.data.workerIndex].task=void 0,P.numTasksExecuting--,g[e.data.workerIndex].status="ready",P.numTasksCompleted++;var r=(new Date).getTime();P.totalTaskTimeInMS+=r-t,a()}}function o(){if(!(g.length>=x.maxWebWorkers)){var e=new Worker(x.webWorkerPath);g.push({worker:e,status:"initializing"}),e.addEventListener("message",n),e.postMessage({taskType:"initialize",workerIndex:g.length-1,config:x})}}function i(e){if(e=e||b,x)throw new Error("WebWorkerManager already initialized");if(x=e,v.decodeConfig=(x.taskConfiguration||b.taskConfiguration).decodeTask,!1!==v.decodeConfig.useWebWorkers&&(x.maxWebWorkers=x.maxWebWorkers||navigator.hardwareConcurrency||1,!x.startWebWorkersOnDemand))for(var t=0;t<x.maxWebWorkers;t++)o()}function l(e,t){x.webWorkerTaskPaths.push(e),t&&(x.taskConfiguration=Object.assign(x.taskConfiguration,t));for(var r=0;r<g.length;r++)g[r].worker.postMessage({taskType:"loadWebWorkerTask",workerIndex:g.length-1,sourcePath:e,config:x})}function u(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments[3];x||i();var o={},l=new Promise(function(e,t){o={resolve:e,reject:t}}),u=void 0;for(u=0;u<m.length&&!(m[u].priority<r);u++);var f=p++;return m.splice(u,0,{taskId:f,taskType:e,status:"ready",added:(new Date).getTime(),data:t,deferred:o,priority:r,transferList:n}),a(),{taskId:f,promise:l}}function f(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<m.length;r++)if(m[r].taskId===e){var a=m.splice(r,1)[0];for(a.priority=t,r=0;r<m.length&&!(m[r].priority<t);r++);return m.splice(r,0,a),!0}return!1}function d(e,t){for(var r=0;r<m.length;r++)if(m[r].taskId===e){var a=m.splice(r,1);return a.deferred.reject(t),!0}return!1}function s(){return P.maxWebWorkers=x.maxWebWorkers,P.numWebWorkers=g.length,P.numTasksQueued=m.length,P}Object.defineProperty(t,"__esModule",{value:!0});var c=r(4),p=0,m=[],g=[],v=(0,c.getOptions)(),b={maxWebWorkers:navigator.hardwareConcurrency||1,startWebWorkersOnDemand:!0,webWorkerPath:"../../dist/cornerstoneWADOImageLoaderWebWorker.js",webWorkerTaskPaths:[],taskConfiguration:{decodeTask:{useWebWorkers:!0,loadCodecsOnStartup:!0,initializeCodecsOnStartup:!1,codecsPath:"../dist/cornerstoneWADOImageLoaderCodecs.js",usePDFJS:!1,strict:v.strict}}},x=void 0,P={maxWebWorkers:0,numWebWorkers:0,numTasksQueued:0,numTasksExecuting:0,numTasksCompleted:0,totalTaskTimeInMS:0,totalTimeDelayedInMS:0};t.default={initialize:i,loadWebWorkerTask:l,addTask:u,getStatistics:s,setTaskPriority:f,cancelTask:d}},function(e,t,r){"use strict";function a(e){return n(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(e))))}function n(e){var t=void 0;try{return decodeURIComponent(escape(e))}catch(r){if((t=r)instanceof URIError)return e;throw t}}function o(e,t,r){var n=(new Date).getTime(),o=new Blob([t],{type:"image/jpeg"});return new Promise(function(t,i){var u=new FileReader;void 0===u.readAsBinaryString?u.readAsArrayBuffer(o):u.readAsBinaryString(o),u.onload=function(){var o=new Image;o.onload=function(){r.height=o.height,r.width=o.width,e.rows=o.height,e.columns=o.width;var a=r.getContext("2d");a.drawImage(this,0,0);var i=a.getImageData(0,0,o.width,o.height),u=(new Date).getTime();e.pixelData=i.data,e.imageData=i,e.decodeTimeInMS=u-n;var f=(0,l.default)(e.pixelData);e.smallestPixelValue=f.min,e.largestPixelValue=f.max,t(e)},o.onerror=function(e){i(e)},void 0===u.readAsBinaryString?o.src="data:image/jpeg;base64,"+window.btoa(a(u.result)):o.src="data:image/jpeg;base64,"+window.btoa(u.result)},u.onerror=function(e){i(e)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),l=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"RGB"===e||"PALETTE COLOR"===e||"YBR_FULL"===e||"YBR_FULL_422"===e||"YBR_PARTIAL_422"===e||"YBR_PARTIAL_420"===e||"YBR_RCT"===e||"YBR_ICT"===e}},function(e,t,r){"use strict";function a(e,t){0===e.planarConfiguration?(0,i.convertRGBColorByPixel)(e.pixelData,t):(0,i.convertRGBColorByPlane)(e.pixelData,t)}function n(e,t){0===e.planarConfiguration?(0,i.convertYBRFullByPixel)(e.pixelData,t):(0,i.convertYBRFullByPlane)(e.pixelData,t)}function o(e,t){var r=t.data;if("RGB"===e.photometricInterpretation)a(e,r);else if("YBR_RCT"===e.photometricInterpretation)a(e,r);else if("YBR_ICT"===e.photometricInterpretation)a(e,r);else if("PALETTE COLOR"===e.photometricInterpretation)(0,i.convertPALETTECOLOR)(e,r);else if("YBR_FULL_422"===e.photometricInterpretation)a(e,r);else{if("YBR_FULL"!==e.photometricInterpretation)throw new Error("No color space conversion for photometric interpretation "+e.photometricInterpretation);n(e,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=r(18)},function(e,t,r){"use strict";function a(e,t){if(t=t||e.transferSyntax,8===e.bitsAllocated&&"1.2.840.10008.1.2.4.50"===t&&(3===e.samplesPerPixel||4===e.samplesPerPixel))return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,r){"use strict";function a(e){return"dicomfile:"+(l.push(e)-1)}function n(e){return l[e]}function o(e){l[e]=void 0}function i(){l=[]}Object.defineProperty(t,"__esModule",{value:!0});var l=[];t.default={add:a,get:n,remove:o,purge:i}},function(e,t,r){"use strict";function a(e){return e.intString("x00280008")!==e.elements.x7fe00010.fragments.length}function n(e,t){if(e.elements.x7fe00010&&e.elements.x7fe00010.basicOffsetTable.length)return o.dicomParser.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t);if(a(e)){var r=o.dicomParser.createJPEGBasicOffsetTable(e,e.elements.x7fe00010);return o.dicomParser.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t,r)}return o.dicomParser.readEncapsulatedPixelDataFromFragments(e,e.elements.x7fe00010,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=r(0)},function(e,t,r){"use strict";function a(e,t){var r=e.elements.x7fe00010||e.elements.x7fe00008,a=e.uint16("x00280100"),n=e.uint16("x00280010"),i=e.uint16("x00280011"),l=e.uint16("x00280002"),u=r.dataOffset,f=n*i*l,d=void 0;if(8===a){if((d=u+t*f)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,d,f)}if(16===a){if((d=u+t*f*2)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,d,2*f)}if(1===a){if((d=u+t*f*.125)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return(0,o.default)(e.byteArray,d,f)}if(32===a){if((d=u+t*f*4)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,d,4*f)}throw new Error("unsupported pixel format")}Object.defineProperty(t,"__esModule",{value:!0});var n=r(42),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=a},function(e,t,r){"use strict";function a(e,t){return e&1<<t}function n(e,t,r){for(var n=new Uint8Array(r),o=0;o<r;o++){var i=Math.floor(o/8),l=e[i+t],u=o%8;n[o]=a(l,u)?1:0}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=(0,i.default)(e),r=parseInt(t.url,10),a=u.default.get(r);return new Promise(function(e,t){var r=new FileReader;r.onload=function(t){var r=t.target.result;e(r)},r.onerror=t,r.readAsArrayBuffer(a)})}Object.defineProperty(t,"__esModule",{value:!0});var o=r(7),i=a(o),l=r(39),u=a(l);t.default=n},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){e.decache=function(){var t=(0,c.default)(e.imageId);m.default.unload(t.url)}}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments[3],o=arguments[4],i=(new Date).getTime();return{promise:new Promise(function(l,u){e.then(function(e){var f=(0,x.default)(e,r),s=e.string("x00020010"),c=(new Date).getTime();(0,d.default)(t,f,s,o).then(function(t){t.data=e,t.sharedCacheKey=a;var r=(new Date).getTime();t.loadTimeInMS=c-i,t.totalTimeInMS=r-i,n(t),l(t)},u)},u)}),cancelFn:void 0}}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments[3],o=arguments[4],i=(new Date).getTime();return{promise:new Promise(function(l,u){var f=(0,x.default)(e,r),s=e.string("x00020010"),c=(new Date).getTime();(0,d.default)(t,f,s,o).then(function(t){t.data=e,t.sharedCacheKey=a;var r=(new Date).getTime();t.loadTimeInMS=c-i,t.totalTimeInMS=r-i,n(t),l(t)},u)}),cancelFn:void 0}}function l(e){return"dicomweb"===e||"wadouri"===e?P.xhrRequest:"dicomfile"===e?v.default:void 0}function u(e,t){var r=(0,c.default)(e),a=l(r.scheme);if(m.default.isLoaded(r.url)){return i(m.default.get(r.url,a,e),e,r.frame,r.url,t)}return o(m.default.load(r.url,a,e),e,r.frame,r.url,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=t.getLoaderForScheme=t.loadImageFromPromise=void 0;var f=r(9),d=a(f),s=r(7),c=a(s),p=r(16),m=a(p),g=r(43),v=a(g),b=r(58),x=a(b),P=r(1);t.loadImageFromPromise=o,t.getLoaderForScheme=l,t.loadImage=u},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(18);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var o=r(19);Object.defineProperty(t,"wadouri",{enumerable:!0,get:function(){return a(o).default}});var i=r(25);Object.defineProperty(t,"wadors",{enumerable:!0,get:function(){return a(i).default}});var l=r(60);Object.defineProperty(t,"configure",{enumerable:!0,get:function(){return a(l).default}});var u=r(37);Object.defineProperty(t,"convertColorSpace",{enumerable:!0,get:function(){return a(u).default}});var f=r(9);Object.defineProperty(t,"createImage",{enumerable:!0,get:function(){return a(f).default}});var d=r(33);Object.defineProperty(t,"decodeImageFrame",{enumerable:!0,get:function(){return a(d).default}});var s=r(35);Object.defineProperty(t,"decodeJPEGBaseline8BitColor",{enumerable:!0,get:function(){return a(s).default}});var c=r(32);Object.defineProperty(t,"getImageFrame",{enumerable:!0,get:function(){return a(c).default}});var p=r(2);Object.defineProperty(t,"getMinMax",{enumerable:!0,get:function(){return a(p).default}});var m=r(36);Object.defineProperty(t,"isColorImage",{enumerable:!0,get:function(){return a(m).default}});var g=r(38);Object.defineProperty(t,"isJPEGBaseline8BitColor",{enumerable:!0,get:function(){return a(g).default}});var v=r(34);Object.defineProperty(t,"webWorkerManager",{enumerable:!0,get:function(){return a(v).default}});var b=r(17);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return a(b).default}});var x=r(1);Object.defineProperty(t,"internal",{enumerable:!0,get:function(){return x.internal}});var P=r(0);Object.defineProperty(t,"external",{enumerable:!0,get:function(){return P.external}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var r=e.length/3,a=0,n=0,o=0;o<r;o++)t[n++]=e[a++],t[n++]=e[a++],t[n++]=e[a++],t[n++]=255}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var r=e.length/3,a=0,n=0,o=r,i=2*r,l=0;l<r;l++)t[a++]=e[n++],t[a++]=e[o++],t[a++]=e[i++],t[a++]=255}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var r=e.length/3,a=0,n=0,o=0;o<r;o++){var i=e[a++],l=e[a++],u=e[a++];t[n++]=i+1.402*(u-128),t[n++]=i-.34414*(l-128)-.71414*(u-128),t[n++]=i+1.772*(l-128),t[n++]=255}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var r=e.length/3,a=0,n=0,o=r,i=2*r,l=0;l<r;l++){var u=e[n++],f=e[o++],d=e[i++];t[a++]=u+1.402*(d-128),t[a++]=u-.34414*(f-128)-.71414*(d-128),t[a++]=u+1.772*(f-128),t[a++]=255}}},function(e,t,r){"use strict";function a(e,t){for(var r=e.length,a=new Uint8ClampedArray(r),n=0;n<r;++n)a[n]=e[n]>>t;return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var r=e.columns*e.rows,n=e.pixelData,o=e.redPaletteColorLookupTableData,i=e.greenPaletteColorLookupTableData,l=e.bluePaletteColorLookupTableData,u=e.redPaletteColorLookupTableData.length,f=0,d=0,s=e.redPaletteColorLookupTableDescriptor[1],c=8===e.redPaletteColorLookupTableDescriptor[2]?0:8,p=a(o,c),m=a(i,c),g=a(l,c),v=0;v<r;++v){var b=n[f++];b<s?b=0:b>s+u-1?b=u-1:b-=s,t[d++]=p[b],t[d++]=m[b],t[d++]=g[b],t[d++]=255}}},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var r=(0,f.default)(t),a=s.default.get(r.url);if(a){if("generalSeriesModule"===e)return{modality:a.string("x00080060"),seriesInstanceUID:a.string("x0020000e"),seriesNumber:a.intString("x00200011"),studyInstanceUID:a.string("x0020000d"),seriesDate:o.dicomParser.parseDA(a.string("x00080021")),seriesTime:o.dicomParser.parseTM(a.string("x00080031")||"")};if("patientStudyModule"===e)return{patientAge:a.intString("x00101010"),patientSize:a.floatString("x00101020"),patientWeight:a.floatString("x00101030")};if("imagePlaneModule"===e){var n=(0,l.default)(a,"x00200037",6),i=(0,l.default)(a,"x00200032",3),u=(0,l.default)(a,"x00280030",2),d=1,c=1;u&&(c=u[0],d=u[1]);var m=null,v=null;return n&&(m=[parseFloat(n[0]),parseFloat(n[1]),parseFloat(n[2])],v=[parseFloat(n[3]),parseFloat(n[4]),parseFloat(n[5])]),{frameOfReferenceUID:a.string("x00200052"),rows:a.uint16("x00280010"),columns:a.uint16("x00280011"),imageOrientationPatient:n,rowCosines:m,columnCosines:v,imagePositionPatient:i,sliceThickness:a.floatString("x00180050"),sliceLocation:a.floatString("x00201041"),pixelSpacing:u,rowPixelSpacing:c,columnPixelSpacing:d}}if("imagePixelModule"===e)return(0,p.default)(a);if("modalityLutModule"===e)return{rescaleIntercept:a.floatString("x00281052"),rescaleSlope:a.floatString("x00281053"),rescaleType:a.string("x00281054"),modalityLUTSequence:(0,g.default)(a.uint16("x00280103"),a.elements.x00283000)};if("voiLutModule"===e){var x=(0,b.default)(a);return{windowCenter:(0,l.default)(a,"x00281050",1),windowWidth:(0,l.default)(a,"x00281051",1),voiLUTSequence:(0,g.default)(x,a.elements.x00283010)}}if("sopCommonModule"===e)return{sopClassUID:a.string("x00080016"),sopInstanceUID:a.string("x00080018")};if("petIsotopeModule"===e){var P=a.elements.x00540016;if(void 0===P)return;var y=P.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:o.dicomParser.parseTM(y.string("x00181072")||""),radionuclideTotalDose:y.floatString("x00181074"),radionuclideHalfLife:y.floatString("x00181075")}}}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(24),l=a(i),u=r(7),f=a(u),d=r(16),s=a(d),c=r(21),p=a(c),m=r(22),g=a(m),v=r(23),b=a(v);t.default=n},function(t,r){t.exports=e},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){i.default.register(e),u.default.register(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(25),i=a(o),l=r(19),u=a(l);t.default=n},function(e,t,r){"use strict";function a(e,t,r){var a=(0,o.default)(e,t,r);if(void 0!==a)return parseFloat(a)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=a},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){var r=p.default.get(t);if(r){if("generalSeriesModule"===e)return{modality:(0,f.default)(r["00080060"]),seriesInstanceUID:(0,f.default)(r["0020000e"]),seriesNumber:(0,s.default)(r["00200011"]),studyInstanceUID:(0,f.default)(r["0020000d"]),seriesDate:o.dicomParser.parseDA((0,f.default)(r["00080021"])),seriesTime:o.dicomParser.parseTM((0,f.default)(r["00080031"],0,""))};if("patientStudyModule"===e)return{patientAge:(0,s.default)(r["00101010"]),patientSize:(0,s.default)(r["00101020"]),patientWeight:(0,s.default)(r["00101030"])};if("imagePlaneModule"===e){var a=(0,l.default)(r["00200037"],6),n=(0,l.default)(r["00200032"],3),i=(0,l.default)(r["00280030"],2),u=1,d=1;i&&(d=i[0],u=i[1]);var c=null,m=null;return a&&(c=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])],m=[parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5])]),{frameOfReferenceUID:(0,f.default)(r["00200052"]),rows:(0,s.default)(r["00280010"]),columns:(0,s.default)(r["00280011"]),imageOrientationPatient:a,rowCosines:c,columnCosines:m,imagePositionPatient:n,sliceThickness:(0,s.default)(r["00180050"]),sliceLocation:(0,s.default)(r["00201041"]),pixelSpacing:i,rowPixelSpacing:d,columnPixelSpacing:u}}if("imagePixelModule"===e)return{samplesPerPixel:(0,s.default)(r["00280002"]),photometricInterpretation:(0,f.default)(r["00280004"]),rows:(0,s.default)(r["00280010"]),columns:(0,s.default)(r["00280011"]),bitsAllocated:(0,s.default)(r["00280100"]),bitsStored:(0,s.default)(r["00280101"]),highBit:(0,f.default)(r["00280102"]),pixelRepresentation:(0,s.default)(r["00280103"]),planarConfiguration:(0,s.default)(r["00280006"]),pixelAspectRatio:(0,f.default)(r["00280034"]),smallestPixelValue:(0,s.default)(r["00280106"]),largestPixelValue:(0,s.default)(r["00280107"]),redPaletteColorLookupTableDescriptor:(0,l.default)(r["00281101"]),greenPaletteColorLookupTableDescriptor:(0,l.default)(r["00281102"]),bluePaletteColorLookupTableDescriptor:(0,l.default)(r["00281103"]),redPaletteColorLookupTableData:(0,l.default)(r["00281201"]),greenPaletteColorLookupTableData:(0,l.default)(r["00281202"]),bluePaletteColorLookupTableData:(0,l.default)(r["00281203"])};if("voiLutModule"===e)return{windowCenter:(0,l.default)(r["00281050"],1),windowWidth:(0,l.default)(r["00281051"],1)};if("modalityLutModule"===e)return{rescaleIntercept:(0,s.default)(r["00281052"]),rescaleSlope:(0,s.default)(r["00281053"]),rescaleType:(0,f.default)(r["00281054"])};if("sopCommonModule"===e)return{sopClassUID:(0,f.default)(r["00080016"]),sopInstanceUID:(0,f.default)(r["00080018"])};if("petIsotopeModule"===e){var g=(0,f.default)(r["00540016"]);if(void 0===g)return;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:o.dicomParser.parseTM((0,f.default)(g["00181072"],0,"")),radionuclideTotalDose:(0,s.default)(g["00181074"]),radionuclideHalfLife:(0,s.default)(g["00181075"])}}}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(28),l=a(i),u=r(3),f=a(u),d=r(27),s=a(d),c=r(8),p=a(c);t.default=n},function(e,t,r){"use strict";function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.external.cornerstone,l=(0,o.getOptions)();return new Promise(function(n,o){var u=new XMLHttpRequest;u.open("get",e,!0),u.responseType="arraybuffer",l.beforeSend(u,t),Object.keys(r).forEach(function(e){u.setRequestHeader(e,r[e])}),a.deferred={resolve:n,reject:o},a.url=e,a.imageId=t,u.onloadstart=function(r){l.onloadstart&&l.onloadstart(r,a);var n={url:e,imageId:t};i.triggerEvent(i.events,"cornerstoneimageloadstart",n)},u.onloadend=function(r){l.onloadend&&l.onloadend(r,a);var n={url:e,imageId:t};i.triggerEvent(i.events,"cornerstoneimageloadend",n)},u.onreadystatechange=function(e){if(l.onreadystatechange)return void l.onreadystatechange(e,a);4===u.readyState&&(200===u.status?n(u.response,u):o(u))},u.onprogress=function(r){var n=r.loaded,o=void 0,u=void 0;r.lengthComputable&&(o=r.total,u=Math.round(n/o*100)),l.onprogress&&l.onprogress(r,a);var f={url:e,imageId:t,loaded:n,total:o,percentComplete:u};i.triggerEvent(i.events,"cornerstoneimageloadprogress",f)},u.send()})}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(4);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.registerImageLoader("wadors",n.default),e.metaData.addProvider(o.metaDataProvider)};var a=r(31),n=function(e){return e&&e.__esModule?e:{default:e}}(a),o=r(26)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e.elements.x7fe00010||e.elements.x7fe00008).encapsulatedPixelData?(0,i.default)(e,t):(0,u.default)(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(40),i=a(o),l=r(41),u=a(l);t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.registerImageLoader("dicomweb",a.loadImage),e.registerImageLoader("wadouri",a.loadImage),e.registerImageLoader("dicomfile",a.loadImage),e.metaData.addProvider(n.metaDataProvider)};var a=r(44),n=r(20)},function(e,t,r){"use strict";function a(e){(0,n.setOptions)(e)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.default=a}])});
//# sourceMappingURL=cornerstoneWADOImageLoader.min.js.map